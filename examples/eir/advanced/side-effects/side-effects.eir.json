{
  "$schema": "https://raw.githubusercontent.com/Mearman/cairs/main/eir.schema.json",
  "version": "1.0.0",
  "description": "Demonstrates composition of multiple effect operations in EIR. Effects are executed sequentially and recorded in the evaluation state.",
  "airDefs": [
    {
      "ns": "core",
      "name": "add",
      "params": [
        "a",
        "b"
      ],
      "result": {
        "kind": "int"
      },
      "body": {
        "kind": "ref",
        "id": "a"
      }
    }
  ],
  "nodes": [
    {
      "id": "msg1",
      "expr": {
        "kind": "lit",
        "type": {
          "kind": "string"
        },
        "value": "Starting computation..."
      }
    },
    {
      "id": "msg2",
      "expr": {
        "kind": "lit",
        "type": {
          "kind": "string"
        },
        "value": "Processing step 1"
      }
    },
    {
      "id": "msg3",
      "expr": {
        "kind": "lit",
        "type": {
          "kind": "string"
        },
        "value": "Processing step 2"
      }
    },
    {
      "id": "msg4",
      "expr": {
        "kind": "lit",
        "type": {
          "kind": "string"
        },
        "value": "Computation complete!"
      }
    },
    {
      "id": "five",
      "expr": {
        "kind": "lit",
        "type": {
          "kind": "int"
        },
        "value": 5
      }
    },
    {
      "id": "ten",
      "expr": {
        "kind": "lit",
        "type": {
          "kind": "int"
        },
        "value": 10
      }
    },
    {
      "id": "effect1",
      "expr": {
        "kind": "effect",
        "op": "print",
        "args": [
          "msg1"
        ]
      }
    },
    {
      "id": "effect2",
      "expr": {
        "kind": "effect",
        "op": "print",
        "args": [
          "msg2"
        ]
      }
    },
    {
      "id": "addition",
      "expr": {
        "kind": "call",
        "ns": "core",
        "name": "add",
        "args": [
          "five",
          "ten"
        ]
      }
    },
    {
      "id": "effect3",
      "expr": {
        "kind": "effect",
        "op": "print",
        "args": [
          "msg3"
        ]
      }
    },
    {
      "id": "effect4",
      "expr": {
        "kind": "effect",
        "op": "print",
        "args": [
          "msg4"
        ]
      }
    },
    {
      "id": "program",
      "expr": {
        "kind": "seq",
        "first": "effect1",
        "then": "rest"
      }
    },
    {
      "id": "rest",
      "expr": {
        "kind": "seq",
        "first": "effect2",
        "then": "rest2"
      }
    },
    {
      "id": "rest2",
      "expr": {
        "kind": "seq",
        "first": "addition",
        "then": "rest3"
      }
    },
    {
      "id": "rest3",
      "expr": {
        "kind": "seq",
        "first": "effect3",
        "then": "effect4"
      }
    }
  ],
  "result": "program",
  "expected_result": "Computation complete!",
  "note": "Composes multiple effects and computations. Each print effect is executed and recorded. Effects are visible in the evaluation state."
}
